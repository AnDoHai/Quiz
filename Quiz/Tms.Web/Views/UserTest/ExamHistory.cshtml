@using Tms.Web.Framework.Helpers
@model Tms.Models.UserTestModel.UserTestSearchModel
@{
    ViewBag.Title = "Lịch sử thi";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="page-content-inner">

    <!-- Page content -->
    <div class="form-group row">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="tab-pane mg-top-25px">
                    <div class="control-bar">
                        <div class="row">
                            <div class="page-header col-md-6">
                                <div class="page-title text-left">
                                    <h3>Lịch sử thi</h3>
                                </div>
                            </div>
                            <div class="breadcrumb-line col-md-6">
                                <ul class="breadcrumb float-right font-size">
                                    <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Trang chủ</a></li>
                                    <li class="breadcrumb-item"><a href="@Url.Action("ExamHistory", "UserTest")">Lịch sử thi</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div id="main-userTestExamHistory">
                        @Html.Partial("~/Views/UserTest/Partial/_ListItemsExamHistory.cshtml", Model)
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@Html.Partial("~/Views/Shared/Partial/_MessageDegreePartial.cshtml")
@Html.Partial("~/Views/Shared/Partial/_confirmFeedbackPartial.cshtml")
<div class="container">
    <button id="model" type="button" style="display:none" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Quy định</button>
    <!-- Modal -->
    <div class="modal fade in" id="myModal" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" id="resultModel">

            </div>
        </div>
    </div>
</div>

@section scripts
{
    <script src="~/Assets/scripts/Tms.UserTest.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            userTestModule.init();
            if (window.localStorage.getItem('QuizStatus')) {
                window.localStorage.removeItem('SubmitExam');
                $('#layout_modal_feedback').modal({ backdrop: 'static', keyboard: false })
                $('#layout_modal_feedback').modal('show');
            }
        });
        var doc = new jsPDF();
        var specialElementHandlers = {
            '#editor': function (element, renderer) {
                return true;
            }
        };
        $('#generatePDF').click(function () {
            var data = 1482;
            $.ajax({
                url: "/UserTest/PrintDegree",
                type: "POST",
                data: { id: data },
                success: function (data) {
                    if (data.IsError === false) {
                        var html = data.HTML;
                        doc.fromHTML(html, 0, 0, {
                            'width': 790,
                            'elementHandlers': specialElementHandlers
                        });
                        doc.save('sample_file.pdf');
                    } else {
                        common.notify.showError(data.Message);
                    }
                },
                error: function () {
                    console.log("Err");
                }
            });

            //alert($('#cccc').val());
            //doc.fromHTML($('#cccc').val(), 0, 0, {
            //    'width': 790,
            //    'elementHandlers': specialElementHandlers
            //});
            //doc.save('sample_file.pdf');
        });
    </script>
}
