@model Tms.Models.User.UserModel
@using Tms.Models

@{
    ViewBag.Title = "Quản lý tài khoản";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
<div class="page-content-inner mt-5" id="user-form">
    <div class="row form-group">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="tab-pane mg-top-25px">
                    <div class="control-bar">
                        <div class="row justify-content-between">
                            <div class="page-header col-md-6">
                                <div class="page-title text-left mb-5">
                                    <h3>Thông tin cá nhân</h3>
                                </div>
                            </div>
                            <div class="breadcrumb-line col-md-6">
                                <ul class="breadcrumb float-right font-size">
                                    <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Trang chủ</a></li>
                                    <li class="breadcrumb-item"><a href="@Url.Action("UserInfo", "Account")">Thông tin cá nhân</a></li>
                                </ul>
                                @*<div class="visible-xs breadcrumb-toggle">
                                        <a class="btn btn-link btn-lg btn-icon" data-toggle="collapse" data-target=".breadcrumb-buttons"><i class="icon-menu2"></i></a>
                                    </div>*@
                            </div>
                        </div>
                        <div class="row">
                            @using (Html.BeginForm("Edit", "Account", FormMethod.Post, new { id = "frmUpdate", @enctype = "multipart/form-data" }))
                            {
                                @Html.Hidden("type", "uf")
                                @Html.HiddenFor(c => c.UserId)
                                <div class="col-12">
                                    @Html.Partial("Partial/_UserForm", Model)
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts
{
    <script src="~/Asset/js/jquery-3.5.1.slim.min.js"></script>
    <script src="~/assets/js/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="~/assets/js/datepicker-vi.js" type="text/javascript"></script>
    <script src="~/Assets/bootstrap-5.0.0-beta2-dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/Assets/plugins/chosen/chosen.jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            accountModule.init();
            $.fn.datepicker.defaults.language = 'vi';
            $(".datepicker").datepicker({ autoclose: true, });
            $('.chosen-select').chosen({ width: '100%' });
            $.validator.setDefaults({ ignore: ":hidden:not(select)" });
            if ($('.label-user').text() != "") {
                $("#profileChangePassData").toggle();
                $('#user-form').css("height", "850px");;
            }
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            //$('#ImageFile').change(function () {
            //    $('.imgEdit').hide();
            //});
        });
        $("#ImageFile").change(function () {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('.imgEdit').html('');
                var stringImage = '<img src="' + e.target.result + '" class="imageAvatar" alt="Alternate Text">';
                $('.imgEdit').html(stringImage);
                document.getElementsByClassName("imageAvatar").src = e.target.result;
            };
            reader.readAsDataURL(this.files[0]);
            //$("#profile-img-tag").css({ "height": "80", "width": "80" });
            //$(".form-actions").css({ "position": "relative", "bottom": "12em" });
        });

        //function readURL(input) {

        //        //var reader = new FileReader();

        //        //reader.onload = function (e) {
        //        //    $('#profile-img-tag').attr('src', e.target.result);
        //        //}
        //        //reader.readAsDataURL(input.files[0]);
        //        var reader = new FileReader();
        //        reader.onload = function (e) {
        //            alert('22');
        //            document.getElementsByClassName("imageAvatar").src = e.target.result;
        //        };
        //        reader.readAsDataURL(this.files[0]);

        //}

        //$('#img-edit').each(function () {
        //    if (this.src.length > 0) {
        //        $(".form-actions").css({ "position": "relative", "bottom": "12em" });
        //    }
        //});
    </script>
    <script type="text/javascript">

        function changePassWord() {
            $("#profileChangePassData").toggle();

        }

        //function changePassWord() {
        //    $('#profileChangePassData').removeClass('d-none');
        //    $('#profilePassData').addClass('d-none');
        //
        //}

        function closeChangePassWord() {
            $('#profileChangePassData').addClass('d-none');
            $('#profilePassData').removeClass('d-none');
            $('#user-form').css("height", "550px");
        }
    </script>
}

